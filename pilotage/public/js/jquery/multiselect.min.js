/*
 * Multiselect
 * http://crlcu.github.io/multiselect/
 *
 * Copyright (c) 2013 Adrian Crisan
 * Licensed under the MIT license.
 */
;(function(b){var a=(function(d){function c(e,f){if(typeof d!="function"){throw"$ is undefined or not a function"}var g=e.attr("id");this.left=e;this.right=d(f.right).length?d(f.right):d("#"+g+"_to");this.actions={leftAll:d(f.leftAll).length?d(f.leftAll):d("#"+g+"_leftAll"),rightAll:d(f.rightAll).length?d(f.rightAll):d("#"+g+"_rightAll"),leftSelected:d(f.leftSelected).length?d(f.leftSelected):d("#"+g+"_leftSelected"),rightSelected:d(f.rightSelected).length?d(f.rightSelected):d("#"+g+"_rightSelected")};delete f.leftAll;delete f.leftSelected;delete f.right;delete f.rightAll;delete f.rightSelected;this.callbacks=f;this.init()}c.prototype={init:function(){var e=this;if(typeof e.callbacks.startUp=="function"){e.callbacks.startUp(e.left,e.right)}if(typeof e.callbacks.sort=="function"){e.left.find("option").sort(e.callbacks.sort).appendTo(e.left);e.right.find("option").sort(e.callbacks.sort).appendTo(e.right)}e.events(e.actions)},events:function(f){var e=this;e.left.on("dblclick","option",function(g){g.preventDefault();e.moveOneToRight(this)});e.right.on("dblclick","option",function(g){g.preventDefault();e.moveOneToLeft(this)});if(navigator.userAgent.match(/MSIE/i)){e.left.dblclick(function(g){f.rightSelected.trigger("click")});e.right.dblclick(function(g){f.leftSelected.trigger("click")})}f.rightSelected.on("click",function(h){h.preventDefault();var g=e.left.find("option:selected");if(g){e.moveOneToRight(g)}});f.leftSelected.on("click",function(h){h.preventDefault();var g=e.right.find("option:selected");if(g){e.moveOneToLeft(g)}});f.rightAll.on("click",function(h){h.preventDefault();var g=e.left.find("option");if(g){e.moveAllToRight(g)}});f.leftAll.on("click",function(h){h.preventDefault();var g=e.right.find("option");if(g){e.moveAllToLeft(g)}})},moveOneToRight:function(g,f){var e=this;if(typeof e.callbacks.beforeMoveOneToRight=="function"&&!f){if(!e.callbacks.beforeMoveOneToRight(e.left,e.right,g)){return false}}e.right.append(g);if(typeof e.callbacks.sort=="function"&&!f){e.right.find("option").sort(e.callbacks.sort).appendTo(e.right)}if(typeof e.callbacks.afterMoveOneToRight=="function"&&!f){e.callbacks.afterMoveOneToRight(e.left,e.right,g)}return e},moveOneToLeft:function(g,f){var e=this;if(typeof e.callbacks.beforeMoveOneToLeft=="function"&&!f){if(!e.callbacks.beforeMoveOneToLeft(e.left,e.right,g)){return false}}e.left.append(g);if(typeof e.callbacks.sort=="function"&&!f){e.left.find("option").sort(e.callbacks.sort).appendTo(e.left)}if(typeof e.callbacks.afterMoveOneToLeft=="function"&&!f){e.callbacks.afterMoveOneToLeft(e.left,e.right,g)}return e},moveAllToRight:function(f){var e=this;if(typeof e.callbacks.beforeMoveAllToRight=="function"){if(!e.callbacks.beforeMoveAllToRight(e.left,e.right,f)){return false}}for(var g=0;f[g];g++){e.moveOneToRight(f[g],true)}if(typeof e.callbacks.sort=="function"){e.right.find("option").sort(e.callbacks.sort).appendTo(e.right)}if(typeof e.callbacks.afterMoveAllToRight=="function"){e.callbacks.afterMoveAllToRight(e.left,e.right,f)}return e},moveAllToLeft:function(f){var e=this;if(typeof e.callbacks.beforeMoveAllToLeft=="function"){if(!e.callbacks.beforeMoveAllToLeft(e.left,e.right,f)){return false}}for(var g=0;f[g];g++){e.moveOneToLeft(f[g],true)}if(typeof e.callbacks.sort=="function"){e.left.find("option").sort(e.callbacks.sort).appendTo(e.left)}if(typeof e.callbacks.afterMoveAllToLeft=="function"){e.callbacks.afterMoveAllToLeft(e.left,e.right,f)}return e}};return c})(jQuery);b.multiselect={defaults:{startUp:function(d,c){c.find("option").each(function(e,f){d.find('option[value="'+f.value+'"]').remove()})},beforeMoveOneToRight:function(d,c,e){return true},afterMoveOneToRight:function(d,c,e){},beforeMoveAllToRight:function(e,c,d){return true},afterMoveAllToRight:function(e,c,d){},beforeMoveOneToLeft:function(d,c,e){return true},afterMoveOneToLeft:function(d,c,e){},beforeMoveAllToLeft:function(e,c,d){return true},afterMoveAllToLeft:function(e,c,d){},sort:function(d,c){if(d.innerHTML=="NA"){return 1}else{if(c.innerHTML=="NA"){return -1}}return(d.innerHTML>c.innerHTML)?1:-1}},setup:{}};b.fn.multiselect=function(c){return this.each(function(){var f=b(this),e=f.data();var d=b.extend({},b.multiselect.defaults,b.multiselect.setup,e,c);return new a(b(this),d)})}})(jQuery);