{"version":3,"sources":["lib/widgets/tree/LayerTreeBuilder.js","lib/plugins/LayerTreeBuilderNodeAgent.js"],"names":["Ext","namespace","GeoExt","ux","tree","LayerTreeBuilder","extend","TreePanel","CUSTOM_EVENTS","title","otherLayersText","baseLayersText","wmsLegendNodes","vectorLegendNodes","checkableContainerGroupNodes","checkableLeafGroupNodes","layerStore","enableDD","loader","applyLoader","uiProviders","custom_ui","LayerNodeUI","TreeNodeUIEventMixin","root","nodeType","children","initComponent","this","addEvents","plugins","push","ptype","LayerTreeBuilderNodeAgent","superclass","call","MapPanel","guess","layers","on","add","onLayerAdded","remove","onLayerRemoved","scope","treeBuilder","afterrender","getCount","data","items","store","records","index","each","record","layer","getLayer","displayInLayerSwitcher","group","options","undefined","groupString","layerNode","name","isLeaf","allowDrag","checked","visibility","getRootNode","appendChild","split","addGroupNodes","fireEvent","groups","parentNode","layerRecord","that","shift","childNode","getNodeByText","length","createNode","attr","LayerLoader","prototype","getByLayer","OpenLayers","Layer","WMS","component","xtype","showTitle","hidden","hideInLegend","inRange","legende","cls","set","Vector","ArcGIS93Rest","isBaseLayer","apply","listeners","checkchange","checkChange","text","leaf","insert","onLayerContainerNodeAdded","append","filter","indexOf","baseAttrs","uiProvider","onTreeNodeAppend","checkableNode","node","getUI","isChecked","expand","eachChild","child","ui","toggleCheck","i","childNodes","updateNodeCheckbox","attributes","Error","arguments","callee","checkboxChildren","allChecked","setNodeChecked","unvisitedNodeIds","id","getOwnerTree","nodeOrId","Node","getNodeById","checkbox","checkboxNodes","cascade","validateLayerContainerStatus","show","ensureVisible","validateTreeNodeStatus","isRoot","util","Observable","init","config","onLayerManaged","events","visibilitychanged","event","object","layerContainer","expandTreeNodesFromGroup","findChild"],"mappings":"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","file":"LayerTreeBuilder-build.js"}