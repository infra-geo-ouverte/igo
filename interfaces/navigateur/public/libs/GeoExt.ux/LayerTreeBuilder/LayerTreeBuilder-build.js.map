{"version":3,"file":"LayerTreeBuilder-build.js","sources":["lib/widgets/tree/LayerTreeBuilder.js","lib/plugins/LayerTreeBuilderNodeAgent.js"],"names":["Ext","namespace","GeoExt","ux","tree","LayerTreeBuilder","extend","TreePanel","CUSTOM_EVENTS","title","otherLayersText","baseLayersText","wmsLegendNodes","vectorLegendNodes","checkableContainerGroupNodes","checkableLeafGroupNodes","layerStore","enableDD","loader","applyLoader","uiProviders","custom_ui","LayerNodeUI","TreeNodeUIEventMixin","root","nodeType","children","initComponent","this","addEvents","plugins","push","ptype","LayerTreeBuilderNodeAgent","superclass","call","MapPanel","guess","layers","on","add","onLayerAdded","remove","onLayerRemoved","scope","treeBuilder","afterrender","getCount","data","items","store","records","index","each","record","layer","getLayer","displayInLayerSwitcher","group","options","undefined","groupString","layerNode","name","isLeaf","allowDrag","checked","visibility","getRootNode","appendChild","split","addGroupNodes","fireEvent","groups","parentNode","layerRecord","that","shift","childNode","getNodeByText","length","createNode","attr","LayerLoader","prototype","getByLayer","OpenLayers","Layer","WMS","component","xtype","showTitle","hidden","hideInLegend","inRange","legende","cls","set","Vector","isBaseLayer","apply","listeners","checkchange","checkChange","text","leaf","insert","onLayerContainerNodeAdded","append","filter","indexOf","baseAttrs","uiProvider","onTreeNodeAppend","checkableNode","node","getUI","isChecked","expand","eachChild","child","ui","toggleCheck","i","childNodes","updateNodeCheckbox","attributes","Error","arguments","callee","checkboxChildren","allChecked","setNodeChecked","unvisitedNodeIds","id","getOwnerTree","nodeOrId","Node","getNodeById","checkbox","checkboxNodes","cascade","validateLayerContainerStatus","show","ensureVisible","validateTreeNodeStatus","isRoot","util","Observable","init","config","onLayerManaged","events","visibilitychanged","event","object","layerContainer","expandTreeNodesFromGroup","findChild"],"mappings":"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"}